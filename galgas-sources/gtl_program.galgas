#--- Prologue routine
before {
}

#--- 'when' clauses
case . "gtl"
message "a source text file with the .gtl extension"
grammar gtl_grammar ?sourceFilePath:@lstring inSourceFile
{
  grammar gtl_grammar in inSourceFile
    ?@library            lib
    ?@gtlInstructionList program
  
  @gtlContext context = emptyContext()
  @gtlData vars = @gtlStruct.new { !.here !.emptyMap }

  @string result = ""
  
  [program execute !context !?vars !lib !?result]
  
  message "================================================================\n"
  message result
  message "================================================================\n"
}

#--- Epilogue routine
after {
}
